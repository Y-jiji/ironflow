# Naming Policy

The file/directory prefixed with "_" means their contents can be referred as if in their parent module. 

For example

```
a_module
|_______________ _some_name.rs
|_______________ another_name.rs
|_______________ mod.rs
```

Then, in `a_module/mod.rs`

```rust
mod _some_name;
pub use _some_name::*;
pub mod another_name;
```

This is nearly equivalent to write all the contents in `_some_name.rs` in `mod.rs`
and `mod another_name { ... {all the contents in another_name.rs} ... }` in `mod.rs`

# How cuda is used

Cuda operators are written as `*.cu` file in `./cusrc` directory. 
- in our build script, these files are compiled into `*.ptx` files
- `{name}.ptx` file corresponding to `{name}.cu` lives in `OUT_DIR/ptx`, where OUT_DIR is an environment variable automatically generated by cargo
- these `*.ptx` files are included as constant strings and then used as functions in cuda module

Cuda bindings are generated with bindgen from CUDA Toolkit 11.3, see details in build.rs. (Actually I directly migrated cuda c api, nothing special). 

# Where `async` is used

#TODO(Y-jiji)

# A typical device implmentation

As mentioned before, the 

```
{device name}
|_____________ _arr           <- device information, memory management ...
|              |___ _device.rs
|              |    |__________struct {camel cased device name}
|              |___ _ndarray.rs
|              |___ mod.rs
|_____________ _ops           <- the basic operations for ndarray, such as add, sub, ...
|              |___ _add.rs
|              |___ ...
|              |___ mod.rs
|_____________ _ops_ext       <- the fancy operations for ndarray, such as fancy indexing ...
               |_______ _transpose.rs
               |_______ _einsum.rs
               |_______ _cumsum.rs
```

